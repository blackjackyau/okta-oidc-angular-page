(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{XuDu:function(e,t,s){"use strict";s.r(t),s.d(t,"AdminsModule",(function(){return W}));var r={};s.r(r),s.d(r,"LoadUsers",(function(){return v})),s.d(r,"LoadUsersSuccess",(function(){return M})),s.d(r,"LoadUsersError",(function(){return L})),s.d(r,"LoadUsersNoOp",(function(){return y}));var n=s("ofXK"),c=s("tyNb"),i=s("kt0X"),o=s("4ald"),a=s("/VzD"),b=s("fXoL"),u=s("0MNC"),l=s("/t3+"),m=s("bTqV"),p=s("NFeN"),h=s("STbY"),d=s("XhcP"),f=s("MutI");function g(e,t){if(1&e&&(b.Sb(0),b.Ac(1),b.Rb()),2&e){const e=t.ngIf;b.Cb(1),b.Bc(e.userName)}}function O(e,t){if(1&e&&(b.Ub(0,"a",12),b.Ub(1,"mat-icon",13),b.Ac(2),b.Tb(),b.Ub(3,"span",14),b.Ac(4),b.Tb(),b.Tb()),2&e){const e=t.$implicit;b.mc("routerLink",e.link),b.Cb(2),b.Bc(e.icon),b.Cb(2),b.Bc(e.label)}}let U=(()=>{class e{constructor(e,t,s,r){this.router=e,this.store=t,this.changeDetectorRef=s,this.media=r,this.sideMenus=[{label:"Manage Users",link:"users",icon:"person"},{label:"Key Management",link:"key-mgmt",icon:"vpn_key"}]}ngOnInit(){this.mobileQuery=this.media.matchMedia("(max-width: 600px)"),this.mobileQueryListener=()=>{this.changeDetectorRef.detectChanges()},this.mobileQuery.addListener(this.mobileQueryListener),this.store.dispatch(a.a.loadSession()),this.currentUser$=this.store.pipe(Object(i.t)(o.d))}logout(){this.store.dispatch(a.a.logoutSession())}renew(){}OnDestroy(){this.mobileQuery.removeListener(this.mobileQueryListener)}}return e.\u0275fac=function(t){return new(t||e)(b.Ob(c.a),b.Ob(i.h),b.Ob(b.h),b.Ob(u.c))},e.\u0275cmp=b.Ib({type:e,selectors:[["app-admins"]],decls:24,vars:9,consts:[["color","accent",1,"mat-elevation-z8"],["mat-icon-button","",3,"click"],[1,"main-header-text"],["mat-button","",3,"matMenuTriggerFor"],[4,"ngIf"],["yPosition","below"],["appMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"main-container"],["fixedTopGap","56",3,"opened","disableClose","mode","fixedInViewport"],["sidenav",""],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","aria-hidden","true","aria-label","menu.label"],[1,"menu-label"]],template:function(e,t){if(1&e){const e=b.Vb();b.Ub(0,"div"),b.Ub(1,"mat-toolbar",0),b.Ub(2,"button",1),b.cc("click",(function(){return b.tc(e),b.rc(19).toggle()})),b.Ub(3,"mat-icon"),b.Ac(4,"menu"),b.Tb(),b.Tb(),b.Ub(5,"div",2),b.Ub(6,"div"),b.Ac(7,"Admin Portal"),b.Tb(),b.Tb(),b.Ub(8,"button",3),b.Ub(9,"mat-icon"),b.Ac(10,"person"),b.Tb(),b.zc(11,g,2,1,"ng-container",4),b.hc(12,"async"),b.Tb(),b.Tb(),b.Ub(13,"mat-menu",5,6),b.Ub(15,"button",7),b.cc("click",(function(){return t.logout()})),b.Ac(16,"Logout"),b.Tb(),b.Tb(),b.Ub(17,"mat-sidenav-container",8),b.Ub(18,"mat-sidenav",9,10),b.Ub(20,"mat-nav-list"),b.zc(21,O,5,3,"a",11),b.Tb(),b.Tb(),b.Ub(22,"mat-sidenav-content"),b.Pb(23,"router-outlet"),b.Tb(),b.Tb(),b.Tb()}if(2&e){const e=b.rc(14);b.Cb(8),b.lc("matMenuTriggerFor",e),b.Cb(3),b.lc("ngIf",b.ic(12,7,t.currentUser$)),b.Cb(7),b.mc("opened",!t.mobileQuery.matches),b.mc("disableClose",!t.mobileQuery.matches),b.lc("mode",t.mobileQuery.matches?"over":"side")("fixedInViewport",t.mobileQuery.matches),b.Cb(3),b.lc("ngForOf",t.sideMenus)}},directives:[l.a,m.b,p.a,h.c,n.l,h.d,h.a,d.b,d.a,f.c,n.k,d.c,c.d,f.a,c.b],pipes:[n.b],styles:[".main-header-text[_ngcontent-%COMP%]{flex:1 1 500px}.main-header-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:10px}.main-container[_ngcontent-%COMP%]{height:calc(100vh - 64px)}.mat-list-item[_ngcontent-%COMP%]   .menu-label[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}mat-toolbar[_ngcontent-%COMP%]{height:56px;font-size:18px}"]}),e})();var j=s("P6bf");const v=Object(i.n)("[UserMgmt] Load Users"),M=Object(i.n)("[UserMgmt/API] Load Users Success",Object(i.s)()),L=Object(i.n)("[UserMgmt/API] Load Users Error",Object(i.s)()),y=Object(i.n)("[UserMgmt/API] Load Users No Operation"),T=Object(i.o)("userMgmt"),C=Object(i.q)(T,e=>e.users),k=Object(i.q)(T,e=>e.status),A=Object(i.p)({users:[],status:"INIT"},Object(i.r)(r.LoadUsers,e=>"LOADED"!==e.status?Object.assign(Object.assign({},e),{status:"LOADING"}):Object.assign({},e)),Object(i.r)(r.LoadUsersSuccess,(e,{users:t})=>({users:t,status:"LOADED"})),Object(i.r)(r.LoadUsersError,(e,{errorMsg:t})=>Object.assign(Object.assign({},e),{status:{errorMsg:t}})));var w=s("FKr1");function I(e,t){if(1&e){const e=b.Vb();b.Ub(0,"mat-list-item",2),b.cc("click",(function(){b.tc(e);const s=t.$implicit;return b.gc().onView(s)})),b.Ub(1,"h3",3),b.Ac(2),b.Tb(),b.Ub(3,"p",3),b.Ac(4),b.Tb(),b.Ub(5,"p",3),b.Ac(6),b.Tb(),b.Tb()}if(2&e){const e=t.$implicit;b.Cb(2),b.Cc(" ",e.id," "),b.Cb(2),b.Dc(" ",e.firstName," ",e.lastName," "),b.Cb(2),b.Cc(" ",e.userName," ")}}function x(e,t){if(1&e&&(b.Ub(0,"p"),b.Ac(1),b.Tb()),2&e){const e=b.gc();b.Cb(1),b.Cc(" Error loading users, reason: ",e.errorMsg," ")}}let N=(()=>{class e{constructor(e){this.store=e}ngOnInit(){this.store.dispatch(r.LoadUsers()),this.users$=this.store.pipe(Object(i.t)(C)),this.store.pipe(Object(i.t)(k)).subscribe(e=>{this.errorMsg=function(e){return void 0!==e.errorMsg?e.errorMsg:null}(e)})}}return e.\u0275fac=function(t){return new(t||e)(b.Ob(i.h))},e.\u0275cmp=b.Ib({type:e,selectors:[["app-user-mgmt"]],decls:4,vars:4,consts:[[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"],["matLine",""]],template:function(e,t){1&e&&(b.Ub(0,"mat-nav-list"),b.zc(1,I,7,4,"mat-list-item",0),b.hc(2,"async"),b.zc(3,x,2,1,"p",1),b.Tb()),2&e&&(b.Cb(1),b.lc("ngForOf",b.ic(2,2,t.users$)),b.Cb(2),b.lc("ngIf",t.errorMsg))},directives:[f.c,n.k,n.l,f.a,w.j],pipes:[n.b],styles:[""]}),e})();var P=s("nAXo");const S=[{path:"",component:U,canActivate:[j.a],children:[{path:"users",component:N},{path:"key-mgmt",component:P.a},{path:"",redirectTo:"users",pathMatch:"full"}]}];let $=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[c.c.forChild(S)],c.c]}),e})();var D=s("snw9"),F=s("eIep"),z=s("5+tZ"),Q=s("lJxs"),E=s("128B");function _(e,t,s){return 0===s?[t]:(e.push(t),e)}var V=s("RrW5"),Y=s("tk/3");let X=(()=>{class e{constructor(e,t,s){this.http=e,this.store=t,this.profileService=s;const r=this.profileService.getActiveProfile();this.baseUrl=`https://cors-anywhere.herokuapp.com/${r.oktaUrl}`,this.ssws$=this.store.pipe(Object(i.t)(o.e))}getUsers(){return this.ssws$.pipe(Object(F.a)(e=>this.http.get(`${this.baseUrl}/api/v1/users`,{headers:{Authorization:`SSWS ${e}`}}).pipe(Object(z.a)(e=>e),Object(Q.a)(e=>({id:e.id,userName:e.profile.login,firstName:e.profile.firstName,lastName:e.profile.lastName})),Object(E.a)(_,[]))))}}return e.\u0275fac=function(t){return new(t||e)(b.Yb(Y.a),b.Yb(i.h),b.Yb(V.a))},e.\u0275prov=b.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var B=s("zp1y"),K=s("JIr8"),R=s("LRne");let J=(()=>{class e{constructor(e,t,s){this.actions$=e,this.store=t,this.usersService=s,this.loadUsers$=Object(D.d)(()=>this.actions$.pipe(Object(D.e)(r.LoadUsers),Object(B.a)(this.store.select(k)),Object(F.a)(([e,t])=>"LOADED"===t?Object(R.a)(r.LoadUsersNoOp()):this.usersService.getUsers().pipe(Object(Q.a)(e=>r.LoadUsersSuccess({users:e})),Object(K.a)(e=>(console.error(e),Object(R.a)(r.LoadUsersError({errorMsg:e.statusText}))))))))}}return e.\u0275fac=function(t){return new(t||e)(b.Yb(D.a),b.Yb(i.h),b.Yb(X))},e.\u0275prov=b.Kb({token:e,factory:e.\u0275fac}),e})();var q=s("B+Mi"),G=s("x0yz");let W=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[n.c,$,q.a,G.a,i.j.forFeature("userMgmt",A),D.b.forFeature([J])]]}),e})()}}]);