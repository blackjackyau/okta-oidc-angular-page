"use strict";(self.webpackChunkokta_oidc_angular_rxjs=self.webpackChunkokta_oidc_angular_rxjs||[]).push([[36],{8036:function(e,t,s){s.r(t),s.d(t,{AdminsModule:function(){return ee}});var n=s(8583),r=s(264),i=s(3065),o=s(819),a=s(9232),c=s(7716),u=s(5072),l=s(2522),m=s(1095),g=s(6627),p=s(3935),h=s(3017),d=s(7746);function f(e,t){if(1&e&&(c.ynx(0),c._uU(1),c.BQk()),2&e){const e=t.ngIf;c.xp6(1),c.Oqu(e.userName)}}function Z(e,t){if(1&e&&(c.TgZ(0,"a",12),c.TgZ(1,"mat-icon",13),c._uU(2),c.qZA(),c.TgZ(3,"span",14),c._uU(4),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.s9C("routerLink",e.link),c.xp6(2),c.Oqu(e.icon),c.xp6(2),c.Oqu(e.label)}}let A=(()=>{class e{constructor(e,t,s,n){this.router=e,this.store=t,this.changeDetectorRef=s,this.media=n,this.sideMenus=[{label:"Manage Users",link:"users",icon:"person"},{label:"Manage Users 2",link:"users2",icon:"person"},{label:"Key Management",link:"key-mgmt",icon:"vpn_key"}]}ngOnInit(){this.mobileQuery=this.media.matchMedia("(max-width: 600px)"),this.mobileQueryListener=()=>{this.changeDetectorRef.detectChanges()},this.mobileQuery.addListener(this.mobileQueryListener),this.store.dispatch(a.n.loadSession()),this.currentUser$=this.store.pipe((0,i.Ys)(o.HF))}logout(){this.store.dispatch(a.n.logoutSession())}renew(){}OnDestroy(){this.mobileQuery.removeListener(this.mobileQueryListener)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(r.F0),c.Y36(i.yh),c.Y36(c.sBO),c.Y36(u.vx))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-admins"]],decls:24,vars:9,consts:[["color","accent",1,"mat-elevation-z8"],["mat-icon-button","",3,"click"],[1,"main-header-text"],["mat-button","",3,"matMenuTriggerFor"],[4,"ngIf"],["yPosition","below"],["appMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"main-container"],["fixedTopGap","56",3,"opened","disableClose","mode","fixedInViewport"],["sidenav",""],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","aria-hidden","true","aria-label","menu.label"],[1,"menu-label"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"mat-toolbar",0),c.TgZ(2,"button",1),c.NdJ("click",function(){return c.CHM(e),c.MAs(19).toggle()}),c.TgZ(3,"mat-icon"),c._uU(4,"menu"),c.qZA(),c.qZA(),c.TgZ(5,"div",2),c.TgZ(6,"div"),c._uU(7,"Admin Portal"),c.qZA(),c.qZA(),c.TgZ(8,"button",3),c.TgZ(9,"mat-icon"),c._uU(10,"person"),c.qZA(),c.YNc(11,f,2,1,"ng-container",4),c.ALo(12,"async"),c.qZA(),c.qZA(),c.TgZ(13,"mat-menu",5,6),c.TgZ(15,"button",7),c.NdJ("click",function(){return t.logout()}),c._uU(16,"Logout"),c.qZA(),c.qZA(),c.TgZ(17,"mat-sidenav-container",8),c.TgZ(18,"mat-sidenav",9,10),c.TgZ(20,"mat-nav-list"),c.YNc(21,Z,5,3,"a",11),c.qZA(),c.qZA(),c.TgZ(22,"mat-sidenav-content"),c._UZ(23,"router-outlet"),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(14);c.xp6(8),c.Q6J("matMenuTriggerFor",e),c.xp6(3),c.Q6J("ngIf",c.lcZ(12,7,t.currentUser$)),c.xp6(7),c.s9C("opened",!t.mobileQuery.matches),c.s9C("disableClose",!t.mobileQuery.matches),c.Q6J("mode",t.mobileQuery.matches?"over":"side")("fixedInViewport",t.mobileQuery.matches),c.xp6(3),c.Q6J("ngForOf",t.sideMenus)}},directives:[l.Ye,m.lW,g.Hw,p.p6,n.O5,p.VK,p.OP,h.TM,h.JX,d.Hk,n.sg,h.Rh,r.lC,d.Tg,r.yS],pipes:[n.Ov],styles:[".main-header-text[_ngcontent-%COMP%]{flex:1 1 500px}.main-header-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:10px}.main-container[_ngcontent-%COMP%]{height:calc(100vh - 64px)}.mat-list-item[_ngcontent-%COMP%]   .menu-label[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}mat-toolbar[_ngcontent-%COMP%]{height:56px;font-size:18px}"]}),e})();var b=s(4186);const L=(0,i.PH)("[UserMgmt] Load Users"),M=(0,i.PH)("[UserMgmt/API] Load Users Success",(0,i.Ky)()),O=(0,i.PH)("[UserMgmt/API] Load Users Error",(0,i.Ky)()),v=(0,i.PH)("[UserMgmt/API] Load Users No Operation"),x=(0,i.ZF)("userMgmt"),y=((0,i.P1)(x,e=>e.users),(0,i.P1)(x,e=>e.status)),T=(0,i.Lq)({users:[],status:"INIT"},(0,i.on)(L,e=>"LOADING"===e.status||"STILL_LOADING"===e.status?Object.assign(Object.assign({},e),{status:"STILL_LOADING"}):"LOADED"!==e.status?Object.assign(Object.assign({},e),{status:"LOADING"}):Object.assign({},e)),(0,i.on)(M,(e,{users:t})=>({users:t,status:"LOADED"})),(0,i.on)(O,(e,{errorMsg:t})=>Object.assign(Object.assign({},e),{status:{errorMsg:t}})));var U=s(2178),k=s(2458);function _(e,t){1&e&&c._UZ(0,"mat-progress-bar",3)}function I(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"mat-list-item",4),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw().onView(t)}),c.TgZ(1,"h3",5),c._uU(2),c.qZA(),c.TgZ(3,"p",5),c._uU(4),c.qZA(),c.TgZ(5,"p",5),c._uU(6),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit;c.xp6(2),c.hij(" ",e.id," "),c.xp6(2),c.AsE(" ",e.firstName," ",e.lastName," "),c.xp6(2),c.hij(" ",e.userName," ")}}function q(e,t){if(1&e&&(c.TgZ(0,"p"),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij(" Error loading users, reason: ",e.errorMsg," ")}}let N=(()=>{class e{constructor(e){this.store=e}ngOnInit(){this.store.dispatch(L()),this.store.pipe((0,i.Ys)(x)).subscribe(e=>{const t=e.status;switch(t){case"LOADING":case"STILL_LOADING":this.loading=!0;break;case"LOADED":this.loading=!1,this.users=e.users;break;default:this.loading=!1,this.errorMsg=function(e){return void 0!==e.errorMsg?e.errorMsg:null}(t)}})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(i.yh))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-mgmt"]],decls:4,vars:3,consts:[["mode","indeterminate",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["mode","indeterminate"],[3,"click"],["matLine",""]],template:function(e,t){1&e&&(c.TgZ(0,"mat-nav-list"),c.YNc(1,_,1,0,"mat-progress-bar",0),c.YNc(2,I,7,4,"mat-list-item",1),c.YNc(3,q,2,1,"p",2),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngForOf",t.users),c.xp6(1),c.Q6J("ngIf",t.errorMsg))},directives:[d.Hk,n.O5,n.sg,U.pW,d.Tg,k.X2],styles:[""]}),e})();var w=s(2070);const F=[{path:"",component:A,canActivate:[b.e],children:[{path:"users",component:N},{path:"users2",component:N},{path:"key-mgmt",component:w.M},{path:"",redirectTo:"users",pathMatch:"full"}]}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[r.Bz.forChild(F)],r.Bz]}),e})();var C=s(1601),Q=s(3190),D=s(9773),S=s(8002),Y=s(2145),G=s(548),j=s(5242),J=s(4022);function $(e,t,s){return 0===s?[t]:(e.push(t),e)}var z=s(1841),H=s(325);let E=(()=>{class e{constructor(e,t,s){this.http=e,this.store=t,this.profileService=s;const n=this.profileService.getActiveProfile();this.baseUrl=`https://cors-anywhere.herokuapp.com/${n.oktaUrl}`,this.ssws$=this.store.pipe((0,i.Ys)(o.yV))}getUsers(){return this.ssws$.pipe((0,Q.w)(e=>this.http.get(`${this.baseUrl}/api/v1/users`,{headers:{Authorization:`SSWS ${e}`}}).pipe((0,D.zg)(e=>e),(0,S.U)(e=>({id:e.id,userName:e.profile.login,firstName:e.profile.firstName,lastName:e.profile.lastName})),function(e,t){return arguments.length>=2?function(s){return(0,J.z)((0,Y.R)(e,t),(0,G.h)(1),(0,j.d)(t))(s)}:function(t){return(0,J.z)((0,Y.R)((t,s,n)=>e(t,s,n+1)),(0,G.h)(1))(t)}}($,[]))))}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(z.eN),c.LFG(i.yh),c.LFG(H.o))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var B=s(7057),K=s(5304),R=s(5917);let V=(()=>{class e{constructor(e,t,s){this.actions$=e,this.store=t,this.usersService=s,this.loadUsers$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(L),(0,B.M)(this.store.select(y)),(0,D.zg)(([e,t])=>"LOADED"===t||"STILL_LOADING"===t?(0,R.of)(v()):this.usersService.getUsers().pipe((0,S.U)(e=>M({users:e})),(0,K.K)(e=>(console.error(e),(0,R.of)(O({errorMsg:e.statusText}))))))))}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(C.eX),c.LFG(i.yh),c.LFG(E))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();var X=s(5990),W=s(453);let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,P,X.M,W.o,i.Aw.forFeature("userMgmt",T),C.sQ.forFeature([V])]]}),e})()}}]);