(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{XuDu:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminsModule",(function(){return K}));var r=n("ofXK"),i=n("tyNb"),a=n("bPo2"),o=n("kt0X"),s=n("sfyx"),c=n("jwFk"),l=n("fXoL"),m=n("0MNC"),p=n("/t3+"),u=n("bTqV"),d=n("NFeN"),h=n("STbY"),f=n("XhcP"),b=n("MutI");function g(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275text"](1),l["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](e.userName)}}function v(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"a",12),l["\u0275\u0275elementStart"](1,"mat-icon",13),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"span",14),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275propertyInterpolate"]("routerLink",e.link),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.icon),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.label)}}let y=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.store=t,this.oktaAuthService=n,this.changeDetectorRef=r,this.media=i,this.sideMenus=[{label:"Manage Users",link:"users",icon:"person"},{label:"Key Management",link:"key-mgmt",icon:"vpn_key"}]}ngOnInit(){this.mobileQuery=this.media.matchMedia("(max-width: 600px)"),this.mobileQueryListener=()=>{this.changeDetectorRef.detectChanges()},this.mobileQuery.addListener(this.mobileQueryListener),this.store.dispatch(new c.a),this.store.dispatch(new c.b),this.currentUser$=this.store.pipe(Object(o.p)(s.a))}logout(){this.router.navigate(["logout"])}renew(){this.oktaAuthService.oktaAuth.token.getWithoutPrompt({responseType:["id_token","token"]}).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}OnDestroy(){this.mobileQuery.removeListener(this.mobileQueryListener)}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](i.Router),l["\u0275\u0275directiveInject"](o.h),l["\u0275\u0275directiveInject"](a.OktaAuthService),l["\u0275\u0275directiveInject"](l.ChangeDetectorRef),l["\u0275\u0275directiveInject"](m.c))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-admins"]],decls:24,vars:9,consts:[["color","accent",1,"mat-elevation-z8"],["mat-icon-button","",3,"click"],[1,"main-header-text"],["mat-button","",3,"matMenuTriggerFor"],[4,"ngIf"],["yPosition","below"],["appMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"main-container"],["fixedTopGap","56",3,"opened","disableClose","mode","fixedInViewport"],["sidenav",""],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","aria-hidden","true","aria-label","menu.label"],[1,"menu-label"]],template:function(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"mat-toolbar",0),l["\u0275\u0275elementStart"](2,"button",1),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275reference"](19).toggle()})),l["\u0275\u0275elementStart"](3,"mat-icon"),l["\u0275\u0275text"](4,"menu"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div",2),l["\u0275\u0275elementStart"](6,"div"),l["\u0275\u0275text"](7,"Admin Portal"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"button",3),l["\u0275\u0275elementStart"](9,"mat-icon"),l["\u0275\u0275text"](10,"person"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](11,g,2,1,"ng-container",4),l["\u0275\u0275pipe"](12,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"mat-menu",5,6),l["\u0275\u0275elementStart"](15,"button",7),l["\u0275\u0275listener"]("click",(function(){return t.logout()})),l["\u0275\u0275text"](16,"Logout"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"mat-sidenav-container",8),l["\u0275\u0275elementStart"](18,"mat-sidenav",9,10),l["\u0275\u0275elementStart"](20,"mat-nav-list"),l["\u0275\u0275template"](21,v,5,3,"a",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"mat-sidenav-content"),l["\u0275\u0275element"](23,"router-outlet"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275reference"](14);l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("matMenuTriggerFor",e),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](12,7,t.currentUser$)),l["\u0275\u0275advance"](7),l["\u0275\u0275propertyInterpolate"]("opened",!t.mobileQuery.matches),l["\u0275\u0275propertyInterpolate"]("disableClose",!t.mobileQuery.matches),l["\u0275\u0275property"]("mode",t.mobileQuery.matches?"over":"side")("fixedInViewport",t.mobileQuery.matches),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",t.sideMenus)}},directives:[p.a,u.a,d.a,h.c,r.l,h.d,h.a,f.b,f.a,b.c,r.k,f.c,i.RouterOutlet,b.a,i.RouterLinkWithHref],pipes:[r.b],styles:[".main-header-text[_ngcontent-%COMP%]{flex:1 1 500px}.main-header-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:10px}.main-container[_ngcontent-%COMP%]{height:calc(100vh - 64px)}.mat-list-item[_ngcontent-%COMP%]   .menu-label[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}mat-toolbar[_ngcontent-%COMP%]{height:56px;font-size:18px}"]}),e})();var j=n("P6bf"),x=function(e){return e.LoadUsers="[Users] Load Users",e.LoadUsersSuccess="[Users] Load Users Success",e}({});class S{constructor(e){this.payload=e,this.type=x.LoadUsers}}class k{constructor(e){this.payload=e,this.type=x.LoadUsersSuccess}}const O=Object(o.n)("userMgmt"),w=Object(o.o)(O,e=>e.users);var I=n("FKr1");function M(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"mat-list-item",1),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().onView(n)})),l["\u0275\u0275elementStart"](1,"h3",2),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"p",2),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"p",2),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",e.id," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.lastName," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",e.userName," ")}}let E=(()=>{class e{constructor(e){this.store=e}ngOnInit(){this.store.dispatch(new S),this.users$=this.store.pipe(Object(o.p)(w))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](o.h))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-mgmt"]],decls:3,vars:3,consts:[[3,"click",4,"ngFor","ngForOf"],[3,"click"],["matLine",""]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"mat-nav-list"),l["\u0275\u0275template"](1,M,7,4,"mat-list-item",0),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind1"](2,1,t.users$)))},directives:[b.c,r.k,b.a,I.j],pipes:[r.b],styles:[""]}),e})();var C=n("nAXo");const L=[{path:"",component:y,canActivate:[j.a],children:[{path:"users",component:E},{path:"key-mgmt",component:C.a},{path:"",redirectTo:"users",pathMatch:"full"}]}];let U=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.RouterModule.forChild(L)],i.RouterModule]}),e})();const $={users:null};function N(e=$,t){switch(t.type){case x.LoadUsersSuccess:return Object.assign(Object.assign({},e),{users:t.payload});default:return e}}var F=n("snw9"),P=n("mrSG"),A=n("eIep"),Q=n("lJxs"),R=n("AytR"),_=n("5+tZ"),V=n("128B");function T(e,t,n){return 0===n?[t]:(e.push(t),e)}var X=n("tk/3");let D=(()=>{class e{constructor(e,t){this.http=e,this.store=t,this.baseUrl=`https://cors-anywhere.herokuapp.com/${R.a.oktaUrl}`,this.ssws$=this.store.pipe(Object(o.p)(s.b))}getUsers(){return this.ssws$.pipe(Object(A.a)(e=>this.http.get(`${this.baseUrl}/api/v1/users`,{headers:{Authorization:`SSWS ${e}`}}).pipe(Object(_.a)(e=>e),Object(Q.a)(e=>({id:e.id,userName:e.profile.login,firstName:e.profile.firstName,lastName:e.profile.lastName})),Object(V.a)(T,[]))))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](X.a),l["\u0275\u0275inject"](o.h))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),z=(()=>{class e{constructor(e,t){this.actions$=e,this.usersService=t,this.loadUsers$=this.actions$.pipe(Object(F.d)(x.LoadUsers),Object(A.a)(()=>this.usersService.getUsers().pipe(Object(Q.a)(e=>new k(e)))))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](F.a),l["\u0275\u0275inject"](D))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),Object(P.b)([Object(F.b)(),Object(P.c)("design:type",Object)],e.prototype,"loadUsers$",void 0),e})();var B=n("B+Mi"),J=n("x0yz");let K=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,U,B.a,J.a,o.j.forFeature("userMgmt",N),F.c.forFeature([z])]]}),e})()}}]);